<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<!--
================================================================
File: BarangInstansi.fxml
CRUD Barang untuk Instansi (tampilan mirip DataBarang.fxml)
================================================================
-->

<BorderPane style="-fx-background-color: #F5E6D3;" 
            xmlns="http://javafx.com/javafx/21" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.inventaris.controller.BarangInstansiController">

    <!-- LEFT SIDEBAR: FORM CRUD -->
    <left>
        <VBox spacing="20" style="-fx-background-color: #6A5436; -fx-padding: 30; -fx-pref-width: 300;">
            
            <Label style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold; -fx-underline: true;" 
                   text="KELOLA BARANG">
                <VBox.margin>
                    <Insets bottom="10" />
                </VBox.margin>
            </Label>

            <!-- Form Input -->
            <VBox spacing="15">
                
                <!-- Kode Barang -->
                <VBox spacing="5">
                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Kode Barang *" />
                    <TextField fx:id="kodeBarangField" promptText="Contoh: BRG-001" 
                               style="-fx-background-color: white; -fx-background-radius: 5;" />
                </VBox>

                <!-- Nama Barang -->
                <VBox spacing="5">
                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Nama Barang *" />
                    <TextField fx:id="namaBarangField" promptText="Nama barang" 
                               style="-fx-background-color: white; -fx-background-radius: 5;" />
                </VBox>

                <!-- Lokasi -->
                <VBox spacing="5">
                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Lokasi" />
                    <TextField fx:id="lokasiField" promptText="Lokasi penyimpanan" 
                               style="-fx-background-color: white; -fx-background-radius: 5;" />
                </VBox>

                <!-- Jumlah Total -->
                <VBox spacing="5">
                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Jumlah Total *" />
                    <TextField fx:id="jumlahTotalField" promptText="0" 
                               style="-fx-background-color: white; -fx-background-radius: 5;" />
                </VBox>

                <!-- Jumlah Tersedia -->
                <VBox spacing="5">
                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Jumlah Tersedia *" />
                    <TextField fx:id="jumlahTersediaField" promptText="0" 
                               style="-fx-background-color: white; -fx-background-radius: 5;" />
                </VBox>

                <!-- Kondisi -->
                <VBox spacing="5">
                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Kondisi" />
                    <ComboBox fx:id="kondisiCombo" maxWidth="Infinity" 
                              style="-fx-background-color: white; -fx-background-radius: 5;" />
                </VBox>

                <!-- Status -->
                <VBox spacing="5">
                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Status" />
                    <ComboBox fx:id="statusCombo" maxWidth="Infinity" 
                              style="-fx-background-color: white; -fx-background-radius: 5;" />
                </VBox>

                <!-- Deskripsi -->
                <VBox spacing="5">
                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Deskripsi" />
                    <TextArea fx:id="deskripsiArea" promptText="Deskripsi barang" 
                              prefRowCount="3" wrapText="true"
                              style="-fx-control-inner-background: white;" />
                </VBox>

                <!-- Action Buttons -->
                <VBox spacing="10">
                    <Button fx:id="btnSave" text="ðŸ’¾ SIMPAN" onAction="#handleSave" 
                            maxWidth="Infinity" prefHeight="40"
                            style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold; -fx-cursor: hand;" />
                    
                    <Button fx:id="btnUpdate" text="âœï¸ UPDATE" onAction="#handleUpdate" 
                            maxWidth="Infinity" prefHeight="40"
                            style="-fx-background-color: #17a2b8; -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold; -fx-cursor: hand;" />
                    
                    <Button fx:id="btnDelete" text="ðŸ—‘ï¸ HAPUS" onAction="#handleDelete" 
                            maxWidth="Infinity" prefHeight="40"
                            style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold; -fx-cursor: hand;" />
                    
                    <Button fx:id="btnClear" text="ðŸ”„ CLEAR" onAction="#handleClear" 
                            maxWidth="Infinity" prefHeight="40"
                            style="-fx-background-color: #6c757d; -fx-text-fill: white; -fx-background-radius: 8; -fx-cursor: hand;" />
                </VBox>

                <Label text="* Wajib diisi" 
                       style="-fx-text-fill: #D9CBC1; -fx-font-size: 12px;" />

            </VBox>

            <Region VBox.vgrow="ALWAYS" />

            <!-- Info Box -->
            <VBox style="-fx-background-color: rgba(0,0,0,0.2); -fx-background-radius: 10; -fx-padding: 15;">
                <Label style="-fx-text-fill: #D9CBC1; -fx-font-size: 12px;" text="Total Barang Anda" />
                <Label fx:id="lblTotalBarang" style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;" text="0" />
            </VBox>

        </VBox>
    </left>

    <!-- CENTER: KATALOG BARANG -->
    <center>
        <VBox spacing="20" style="-fx-padding: 30;">

            <!-- Header & Sort -->
            <HBox alignment="CENTER_LEFT" spacing="15" 
                  style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 5, 0, 0, 2);">
                
                <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="Urutkan:" />
                <ComboBox fx:id="sortCombo" prefWidth="180" 
                          style="-fx-background-color: #F0F0F0; -fx-background-radius: 5;" />
                
                <Region HBox.hgrow="ALWAYS" />
                
                <Label fx:id="lblResultCount" 
                       style="-fx-text-fill: #666; -fx-font-size: 14px;" 
                       text="Menampilkan 0 barang" />
            </HBox>

            <!-- Katalog Grid -->
            <StackPane VBox.vgrow="ALWAYS">
                
                <!-- Katalog Cards -->
                <FlowPane fx:id="catalogGrid" 
                          hgap="20" vgap="20" 
                          alignment="TOP_LEFT" 
                          prefWrapLength="800" />

                <!-- Empty State -->
                <VBox fx:id="emptyState" 
                      alignment="CENTER" spacing="10" 
                      visible="false" managed="false">
                    <Label style="-fx-font-size: 64px;" text="ðŸ“¦" />
                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #6A5436;" 
                           text="Belum ada barang" />
                    <Label style="-fx-text-fill: #888;" 
                           text="Tambahkan barang pertama Anda menggunakan form di kiri." />
                </VBox>

            </StackPane>

        </VBox>
    </center>

</BorderPane>